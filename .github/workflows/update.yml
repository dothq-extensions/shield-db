name: DB Updater

on:
  workflow_dispatch:
  push:
  schedule:
    - cron: '0 7 * * *'

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
      - name: Setting up caches...
        uses: Swatinem/rust-cache@v1.2.0
      - name: Compile and run
        run: cargo run --release
      - name: Upload changes...
        uses: EndBug/add-and-commit@v6
        with:
          author_email: dothq-robot@users.noreply.github.com
          author_name: dothq-robot
          token: ${{ secrets.ROBOT_TOKEN }}
          message: 'ðŸ‘½ Update database'
